{"version":3,"file":"progress-form.min.js","mappings":"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","sources":["webpack://@easylibs/progress-form/webpack/universalModuleDefinition","webpack://@easylibs/progress-form/webpack/bootstrap","webpack://@easylibs/progress-form/webpack/runtime/define property getters","webpack://@easylibs/progress-form/webpack/runtime/hasOwnProperty shorthand","webpack://@easylibs/progress-form/webpack/runtime/make namespace object","webpack://@easylibs/progress-form/./src/scripts/css-style.ts","webpack://@easylibs/progress-form/./src/scripts/focus-in-block.ts","webpack://@easylibs/progress-form/./src/progress-form.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"progress-form\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"progress-form\"] = factory();\n\telse\n\t\troot[\"progress-form\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { StyleOptions } from \"./interfaces\";\r\nimport { ProgressFormType } from \"./types\";\r\n\r\ndeclare type animationType = { targets: (Element | string)[], translateX: number };\r\n\r\nexport function cssStyle(\r\n  params: ProgressFormType,\r\n  fieldSets: NodeListOf<HTMLFieldSetElement>,\r\n  translateX: number,\r\n  fieldsetLength: number,\r\n  fieldsetMarginWidth: number,\r\n  styleOptions?: StyleOptions\r\n) {\r\n  try {\r\n    const fieldSetParent = params.form.querySelector(\r\n      \"[fieldset__parent]\"\r\n    ) as HTMLElement;\r\n    const fieldsetContainer = fieldSetParent.querySelector(\r\n      \"[fieldset__container]\"\r\n    ) as HTMLElement;\r\n    const fieldsetWidth = Math.abs(translateX);\r\n    const fieldsetContainerWidth =\r\n      fieldsetLength * fieldsetWidth + fieldsetMarginWidth;\r\n    const defaultFieldSetParentStyle = {\r\n      height: \"100%\",\r\n      overflow: \"hidden\",\r\n      width: `${fieldsetWidth}px`,\r\n    };\r\n    const defaultFormStyle = {\r\n      width: `${fieldsetWidth}px`,\r\n      height: \"100%\",\r\n      boxSizing: \"border-box\",\r\n    };\r\n\r\n    const defaultFieldsetContainerStyle = {\r\n      width: `${fieldsetContainerWidth}px`,\r\n      height: \"100%\",\r\n      overflow: \"hidden\",\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n    };\r\n\r\n    const defaultFieldsetStyle = {\r\n      width: `${fieldsetWidth}px`,\r\n      transition: \"margin-left 0.4s ease-in-out\",\r\n      backgroundColor: \"#FFFFFF\",\r\n      justifyContent: \"space-between\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      padding: \"30px\",\r\n      border: \"none\",\r\n      boxShadow: \"0 0 5px rgba(255, 255, 255, 0.7137254902)\",\r\n      borderRadius: \"3px\",\r\n    };\r\n\r\n    // Fusionnez les styles par défaut avec les styles personnalisés\r\n    const formStyle = Object.assign({}, defaultFormStyle, styleOptions?.form);\r\n    const fieldSetParentStyle = Object.assign(\r\n      {},\r\n      defaultFieldSetParentStyle,\r\n      styleOptions?.fieldsetParent\r\n    );\r\n    const fieldsetContainerStyle = Object.assign(\r\n      {},\r\n      defaultFieldsetContainerStyle,\r\n      styleOptions?.fieldsetContainer\r\n    );\r\n    const fieldsetStyle = Object.assign(\r\n      {},\r\n      defaultFieldsetStyle,\r\n      styleOptions?.fieldset\r\n    );\r\n\r\n    Object.assign(params.form.style, formStyle);\r\n    Object.assign(fieldSetParent.style, fieldSetParentStyle);\r\n    Object.assign(fieldsetContainer.style, fieldsetContainerStyle);\r\n    fieldSets.forEach((fieldSet, index) => {\r\n      Object.assign(fieldSet.style, fieldsetStyle);\r\n      fieldSet.classList.add(`fieldset${index}`);\r\n    });\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n}\r\n\r\nconst lastTranslateXMap = new Map<Element, number>();\r\nexport function anime(options: animationType) {\r\n    options.targets.forEach(target => {\r\n        const element = typeof target === 'string' ? document.querySelector(target) : target;\r\n        if (element) {\r\n            const lastTranslateX = lastTranslateXMap.get(element) || 0;\r\n            const translateX = options.translateX;\r\n            const keyframes: Keyframe[] = [\r\n                { transform: `translateX(${lastTranslateX}px)` },\r\n                { transform: `translateX(${translateX}px)` }\r\n            ];\r\n            const _options: KeyframeAnimationOptions = {\r\n                duration: 1000,\r\n                fill: 'forwards', // L'animation reste appliquée à la fin\r\n                easing: 'cubic-bezier(1, 0, 0, 1)' // Approximation de l'effet d'assouplissement easeInOutExpo\r\n            };\r\n            if (element.animate) {\r\n                element.animate(keyframes, _options);\r\n                lastTranslateXMap.set(element, translateX);\r\n            }\r\n        }\r\n    });\r\n}\r\n","/**\r\n * Gère le focus clavier sur les éléments d'un bloc HTML spécifié.\r\n * @param key - L'événement clavier qui a déclenché la fonction.\r\n * @param block - L'élément HTML qui représente le bloc sur lequel on souhaite gérer le focus.\r\n */\r\nexport function focusInBlock(key:KeyboardEvent, block:HTMLElement):void\r\n{\r\n    key.preventDefault();\r\n    const focusables = getFocusableElements(block);\r\n    let index = focusables.findIndex(f => f === block.querySelector(':focus'));\r\n    (key.shiftKey === true) ? index-- : index++;\r\n    if (index >= focusables.length) { index = 0; }\r\n    if (index < 0) { index = focusables.length - 1; }\r\n    const FIELD = focusables[index] as HTMLElement;\r\n    FIELD.focus();\r\n}\r\n/**\r\n * Récupère tous les éléments focusables dans un bloc HTML spécifié.\r\n * @param block - L'élément HTML qui représente le bloc contenant les éléments focusables.\r\n * @returns Un tableau d'éléments focusables présents dans le bloc.\r\n */\r\nexport function getFocusableElements(block:HTMLElement):Element[]\r\n{\r\n    let focusableSelector = \"button, select, input, a, textarea\";\r\n    return Array.from(block.querySelectorAll(focusableSelector));\r\n}","import { cssStyle,anime } from \"./scripts/css-style\";\r\nimport { focusInBlock, getFocusableElements } from \"./scripts/focus-in-block\";\r\nimport { StyleOptions } from \"./scripts/interfaces\";\r\nimport { ProgressFormType } from \"./scripts/types\";\r\n\r\nlet fieldSetElement:HTMLElement|null = null;\r\n/**\r\n * ProgressForm represents a class for managing a progressive form.\r\n */\r\nexport default class ProgressForm\r\n{\r\n    private translateX:number;\r\n    private fieldsetLength:number = 0;\r\n    private fieldsetMarginWidth: number;\r\n    private params: ProgressFormType;\r\n    /**\r\n     * @param enableDefaultCssStyle Determines whether the default CSS style should be enabled. Default is true.\r\n     */\r\n    constructor(private enableDefaultCssStyle:boolean = true){}\r\n    /**\r\n     * Defines the movement of each fieldset.\r\n     * @param params The parameters for setting translateX.\r\n     * @param fieldSet The fieldset element.\r\n    */\r\n    private setTranslateX(params: ProgressFormType,fieldSet:HTMLElement){\r\n        if(!fieldSet) return ;\r\n        this.translateX = params.translateX ? params.translateX : - fieldSet.offsetWidth;\r\n    }\r\n    /**\r\n     * Executes the progressive form.\r\n     * @param params The parameters of the form.\r\n     * @param styleOptions Style options for the form.\r\n    */\r\n    public run(params:ProgressFormType,styleOptions?: StyleOptions)\r\n    {\r\n        this.params = params;\r\n        this.hasValidHTMLStructure(params.form);\r\n        const fieldSets = params.form.querySelectorAll('fieldset');\r\n        this.setTranslateX(params, fieldSets[0]);\r\n        const progressElement = document.querySelector('[__progress__]') as HTMLElement;\r\n        this.fieldsetMarginWidth = params.fieldsetMargingWidth ?? 60;\r\n        let nextIndex = 1;\r\n        let prevIndex = fieldSets.length;\r\n        let prevTranslateX = 0;\r\n        this.fieldsetLength = fieldSets.length;\r\n        const {progress} = this;\r\n        if(fieldSets && fieldSets.length > 1){\r\n            fieldSets.forEach((fieldSet,i) => {\r\n                const nextButton = fieldSet.querySelector(\"[__next__]\") as HTMLElement;\r\n                const prevButton = fieldSet.querySelector(\"[__prev__]\") as HTMLElement;\r\n                let translateX = this.translateX - this.fieldsetMarginWidth / this.fieldsetLength;\r\n                const targetMarginWidth = params.targetMarginWidth ?? 0;\r\n                let nextTranslateX = (translateX * nextIndex) - targetMarginWidth;\r\n                prevTranslateX  = (translateX * nextIndex) + Math.abs(translateX * 2);\r\n                const nextProgress = progress * (i + 2);\r\n                const prevProgress = i > 1 ? progress * i : progress;\r\n                fieldSetElement = fieldSet;\r\n                fieldSet.classList.add(`fieldset${i}`);\r\n                if(i === 0){\r\n                    const fields = fieldSet.querySelectorAll(\"input:not([type='hidden'],[readonly]), textarea\") as NodeListOf<HTMLInputElement>;\r\n                    fields[i].focus();\r\n                    this.compartmentalizeFocusInFieldset(fieldSetElement);\r\n                }\r\n                this.next(nextButton, nextIndex, nextTranslateX, progressElement, nextProgress);\r\n                nextIndex++;\r\n                if(i === 0){getFocusableElements(fieldSetElement);}\r\n                this.prev(prevButton, prevIndex, prevTranslateX, progressElement, prevProgress);\r\n                prevIndex--;\r\n                \r\n            }); \r\n        }\r\n        if(progressElement){progressElement.style.width = `${progress}%`;}\r\n        if(this.enableDefaultCssStyle)\r\n        {cssStyle(params,fieldSets,this.translateX,this.fieldsetLength, this.fieldsetMarginWidth,styleOptions)}\r\n    }\r\n    /**\r\n     * Handles the \"next\" button click event.\r\n     * @param nextButton The \"next\" button element.\r\n     * @param nextIndex The index of the next fieldset.\r\n     * @param nextTranslateX The translateX value for the next fieldset.\r\n     * @param progressElement The progress element.\r\n     * @param nextProgress The progress for the next fieldset.\r\n     */\r\n    private next(nextButton: HTMLElement, nextIndex: number, nextTranslateX:number, progressElement?:HTMLElement,nextProgress?:number)\r\n    {\r\n        const targets = this.fieldsetTargetArray;\r\n        if(nextButton){\r\n            nextButton.addEventListener(\"click\", (e)=>{\r\n                e.preventDefault();\r\n                const fieldSet = document.querySelector(`.fieldset${nextIndex - 1}`) as HTMLElement;\r\n                const isValidFieldset = this.isValidFieldset(fieldSet);\r\n                if(this.params.onPreNext) this.params.onPreNext(isValidFieldset);\r\n                if(isValidFieldset){\r\n                    fieldSetElement = document.querySelector(`.fieldset${nextIndex}`) as HTMLElement;\r\n                    if(fieldSetElement){\r\n                        this.compartmentalizeFocusInFieldset(fieldSetElement);\r\n                        getFocusableElements(fieldSetElement);\r\n                    }\r\n                    anime({\r\n                        targets: targets,\r\n                        translateX: nextTranslateX\r\n                    });\r\n                    if(progressElement)\r\n                    {progressElement.style.width = `${nextProgress??0}%`;}\r\n                    if(this.params.onPostNext) this.params.onPostNext();\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Handles the \"previous\" button click event.\r\n     * @param prevButton The \"previous\" button element.\r\n     * @param prevIndex The index of the previous fieldset.\r\n     * @param prevTranslateX The translateX value for the previous fieldset.\r\n     * @param progressElement The progress element.\r\n     * @param prevProgress The progress for the previous fieldset.\r\n    */\r\n    private prev(prevButton:HTMLElement, prevIndex:number, prevTranslateX:number ,progressElement?:HTMLElement, prevProgress?:number)\r\n    {\r\n        const targets = this.fieldsetTargetArray;\r\n        if(prevButton){\r\n            prevButton.addEventListener(\"click\", (e)=>{\r\n                e.preventDefault();\r\n                fieldSetElement = document.querySelector(`.fieldset${prevIndex}`);\r\n                if(fieldSetElement){\r\n                    this.compartmentalizeFocusInFieldset(fieldSetElement);\r\n                    getFocusableElements(fieldSetElement);\r\n                }\r\n                anime({\r\n                    targets: targets,\r\n                    translateX: prevTranslateX\r\n                });\r\n                if(progressElement)\r\n                {progressElement.style.width = `${prevProgress??0}%`;}\r\n             });\r\n        }\r\n    }\r\n    /**\r\n     * Calculates the progress percentage of the form.\r\n     * @returns The progress percentage.\r\n    */\r\n    public get progress()\r\n    {\r\n        return 100 / this.fieldsetLength;\r\n    }\r\n    /**\r\n     * Compartmentalizes focus within a fieldset.\r\n     * @param fieldSet The fieldset to compartmentalize focus within.\r\n    */\r\n    private compartmentalizeFocusInFieldset(fieldSet:HTMLElement)\r\n    {\r\n        window.addEventListener('keydown', (e) => {\r\n            if (e.key === 'Tab' && fieldSet !== null){\r\n                focusInBlock(e, fieldSet);\r\n            }\r\n        })\r\n    }\r\n    /**\r\n     * Checks if a fieldset is valid.\r\n     * @param fieldSet The fieldset to validate.\r\n     * @returns true if the fieldset is valid, otherwise false.\r\n    */\r\n    private isValidFieldset(fieldSet: HTMLElement): boolean\r\n    {\r\n        if(fieldSet){\r\n            const fields =  Array.from(fieldSet.querySelectorAll('input, select, textarea'));\r\n            if(fields){\r\n                for(const field of fields as HTMLInputElement[]){\r\n                    if(!field.checkValidity()){\r\n                        field.reportValidity();\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Generates an array of target selectors for fieldsets.\r\n     * @returns An array of target selectors.\r\n     */\r\n    private get fieldsetTargetArray(): string[]\r\n    {\r\n        let fieldsetTargetArray = []\r\n        if(this.fieldsetLength > 0){\r\n            for(let i = 0; i < this.fieldsetLength; i++) {\r\n                fieldsetTargetArray.push(`.fieldset${i}`);\r\n            }\r\n        }\r\n        return fieldsetTargetArray;\r\n    }\r\n    /**\r\n     * Checks if the HTML structure of the form is valid.\r\n     * @param form The form to validate.\r\n     * @throws Error if the HTML structure is not valid.\r\n     */\r\n    private hasValidHTMLStructure(form:HTMLFormElement){\r\n        try {\r\n            if(!form){\r\n                throw new Error(\"The form could not be retrieved\");\r\n            }\r\n            const fieldSetParent = form.querySelector(\"[fieldset__parent]\") as HTMLElement;\r\n            if(!fieldSetParent){\r\n                throw new Error(\"The element with the attribute [fieldset__parent] not found in your form\");\r\n            }\r\n            const fieldsetContainer = fieldSetParent.querySelector(\"[fieldset__container]\") as HTMLElement;\r\n            if(!fieldsetContainer){\r\n                throw new Error(\"The element with the attribute [fieldset__container] not found in your fieldset__parent\");\r\n            }\r\n            const fieldSets = fieldsetContainer.querySelectorAll('fieldset');\r\n            if(!fieldSets){\r\n                throw new Error(\"Aucune section de formulaire trouvée.\");\r\n            }\r\n            const next_buttons = form.querySelectorAll(\"[__next__]\");\r\n            const prev_buttons = form.querySelectorAll(\"[__prev__]\");\r\n            if(!next_buttons){\r\n                throw new Error('No \"next\" button found!');\r\n            }\r\n            if(!prev_buttons){\r\n                throw new Error(\"No 'previous' button found!\");\r\n            }\r\n        } catch (error) {\r\n            throw error;\r\n        }\r\n    }\r\n}\r\n"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","lastTranslateXMap","Map","anime","options","targets","forEach","target","element","document","querySelector","lastTranslateX","translateX","keyframes","transform","concat","animate","duration","fill","easing","set","getFocusableElements","block","Array","from","querySelectorAll","fieldSetElement","ProgressForm","enableDefaultCssStyle","arguments","length","undefined","_classCallCheck","params","fieldSet","this","offsetWidth","styleOptions","_params$fieldsetMargi","_this","hasValidHTMLStructure","form","fieldSets","setTranslateX","progressElement","fieldsetMarginWidth","fieldsetMargingWidth","nextIndex","prevIndex","prevTranslateX","fieldsetLength","progress","i","_params$targetMarginW","nextButton","prevButton","targetMarginWidth","nextTranslateX","Math","abs","nextProgress","prevProgress","classList","add","focus","compartmentalizeFocusInFieldset","next","prev","style","width","fieldSetParent","fieldsetContainer","fieldsetWidth","fieldsetContainerWidth","defaultFieldSetParentStyle","height","overflow","defaultFormStyle","boxSizing","defaultFieldsetContainerStyle","display","justifyContent","defaultFieldsetStyle","transition","backgroundColor","flexDirection","padding","border","boxShadow","borderRadius","formStyle","assign","fieldSetParentStyle","fieldsetParent","fieldsetContainerStyle","fieldsetStyle","fieldset","index","error","console","cssStyle","_this2","fieldsetTargetArray","addEventListener","e","preventDefault","isValidFieldset","onPreNext","onPostNext","_this3","window","focusables","findIndex","f","shiftKey","focusInBlock","fields","_i","_arr","field","checkValidity","reportValidity","push","Error","next_buttons","prev_buttons"],"sourceRoot":""}