!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("progress-form",[],t):"object"==typeof exports?exports["progress-form"]=t():e["progress-form"]=t()}(self,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function r(e,t,r,n,i,o){try{var s=e.querySelector("[fieldset__parent]"),a=s.querySelector("[fieldset__container]"),l=Math.abs(r),f=n*l+i,u={height:"100%",overflow:"hidden",width:"".concat(l,"px")},c={width:"".concat(l,"px"),height:"100%",boxSizing:"border-box"},d={width:"".concat(f,"px"),height:"100%",overflow:"hidden",display:"flex",justifyContent:"space-between"},h={width:"".concat(l,"px"),transition:"margin-left 0.4s ease-in-out",backgroundColor:"#FFFFFF",justifyContent:"space-between",display:"flex",flexDirection:"column",padding:"30px",border:"none",boxShadow:"0 0 5px rgba(255, 255, 255, 0.7137254902)",borderRadius:"3px"},y=Object.assign({},c,null==o?void 0:o.form),g=Object.assign({},u,null==o?void 0:o.fieldsetParent),p=Object.assign({},d,null==o?void 0:o.fieldsetContainer),v=Object.assign({},h,null==o?void 0:o.fieldset);return Object.assign(e.style,y),Object.assign(s.style,g),Object.assign(a.style,p),t.forEach((function(e,t){Object.assign(e.style,v),e.classList.add("fieldset".concat(t))})),{fieldSetParentStyle:g,fieldsetContainerStyle:p,formStyle:y,fieldsetStyle:v}}catch(e){console.error(e)}}e.r(t),e.d(t,{default:()=>c});var n=new Map;function i(e){e.targets.forEach((function(t){var r="string"==typeof t?e.form.querySelector(t):t;if(r){var i=n.get(r)||0,o=e.translateX,s=[{transform:"translateX(".concat(i,"px)")},{transform:"translateX(".concat(o,"px)")}];r.animate&&(0!=e.isAnimate?r.animate(s,{duration:1e3,fill:"forwards",easing:"cubic-bezier(1, 0, 0, 1)"}):r.animate(s,{fill:"forwards"}),n.set(r,o))}}))}function o(e){return Array.from(e.querySelectorAll("button, select, input, a, textarea"))}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}function l(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}var u=null,c=function(){return e=function e(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"fieldsetLength",0),l(this,"progressingData",{}),this.form=t,this.enableDefaultCssStyle=r},t=[{key:"init",value:function(e){var t;this.progressOptions=e,this.animation=null==e?void 0:e.animation,this.hasValidHTMLStructure(this.form);var r=this.form.querySelectorAll("fieldset");this.setTranslateX(r[0],e);var n=document.querySelector("[__progress__]");this.fieldsetMarginWidth=null!==(t=null==e?void 0:e.fieldsetMargingWidth)&&void 0!==t?t:60;var i=this.isLazyRun?this.lazyFieldsetLength:r.length;return this.fieldsetLength=this.lastIndex=this.isLazyRun?this.lazyFieldsetLength:r.length,{fieldSets:r,nextIndex:1,prevTranslateX:0,PROGRESS:this.PROGRESS,prevIndex:i,progressElement:n}}},{key:"run",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=this.init(e),a=s.fieldSets,l=s.nextIndex,f=s.prevTranslateX,c=s.PROGRESS,d=s.prevIndex,h=s.progressElement;if(a&&!this.isLazyRun&&a.length>1){var y,g=this.translateX-this.fieldsetMarginWidth/this.fieldsetLength,p=null!==(y=null==e?void 0:e.targetMarginWidth)&&void 0!==y?y:0;a.forEach((function(e,t){var r=e.querySelector("[__next__]"),s=e.querySelector("[__prev__]"),a=g*l-p;f=g*l+Math.abs(2*g);var y=c*(t+2),v=t>1?c*t:c;if(u=e,e.classList.add("fieldset".concat(t)),0===t){var m=e.querySelectorAll("input:not([type='hidden'],[readonly]), textarea");m&&m.length>0&&m[t].focus(),n.compartmentalizeFocusInFieldset(u)}n.progressingData["fieldset".concat(t)]={"@i":t,"@translateX":0===t?0:1===t?g:a-g,"@progress":c*(t+1),"@target":u,next:{i:l,button:r,translateX:a,progress:y},prev:{i:t-1,button:s,translateX:f,progress:v}},!1!==i&&"prev"!==i||n.next(l,a,r,h,y),l++,n.formatProgressingData(t),0===t&&o(u),!1!==i&&"next"!==i||n.prev(d,f,s,h,v),d--}))}h&&(h.style.width="".concat(c,"%")),this.enableDefaultCssStyle&&(this.renderedStyle=r(this.form,a,this.translateX,this.fieldsetLength,this.fieldsetMarginWidth,t))}},{key:"lazyRun",value:function(e,t,n){var i;this.isLazyRun=!0,this.lazyFieldsetLength=e;for(var o=this.init(t),s=o.fieldSets,a=o.nextIndex,l=o.prevTranslateX,f=o.PROGRESS,c=o.progressElement,d=this.translateX-this.fieldsetMarginWidth/this.fieldsetLength,h=t&&null!==(i=t.targetMarginWidth)&&void 0!==i?i:0,y=0;y<this.lazyFieldsetLength;y++){var g=0===y?document.querySelector("fieldset"):null,p=null==g?void 0:g.querySelector("[__next__]"),v=d*a-h;l=d*a+Math.abs(2*d);var m=f*(y+2),b=y>1?f*y:f;u=g,g&&(g.classList.add("fieldset0"),g.focus(),this.compartmentalizeFocusInFieldset(g)),this.progressingData["fieldset".concat(y)]={"@i":y,"@translateX":0===y?0:1===y?d:v-d,"@progress":f*(y+1),"@target":u,next:{i:a,button:p,translateX:v,progress:m},prev:{i:y-1,button:null,translateX:l,progress:b}},a++,this.formatProgressingData(y)}c&&(c.style.width="".concat(f,"%")),this.enableDefaultCssStyle&&(this.renderedStyle=r(this.form,s,this.translateX,this.fieldsetLength,this.fieldsetMarginWidth,n))}},{key:"next",value:function(e,t,r,n,s){var a=this,l=this.fieldsetTargetArray,f=function(){var r=a.form.querySelector(".fieldset".concat(e-1)),f=a.isValidFieldset(r);a.progressOptions&&a.progressOptions.onPreNext&&a.progressOptions.onPreNext(f),f&&((u=document.querySelector(".fieldset".concat(e)))&&(a.compartmentalizeFocusInFieldset(u),o(u)),i({isAnimate:a.animation,targets:l,translateX:t,form:a.form}),n&&(n.style.width="".concat(null!=s?s:0,"%")),a.progressOptions&&a.progressOptions.onPostNext&&a.progressOptions.onPostNext())};try{r?r.addEventListener("click",(function(e){e.preventDefault(),f()})):this.isLazyRun&&f()}catch(e){console.error(e)}}},{key:"prev",value:function(e,t,r,n,s){var a=this,l=this.fieldsetTargetArray,f=function(){(u=a.form.querySelector(".fieldset".concat(e)))&&(a.compartmentalizeFocusInFieldset(u),o(u)),i({isAnimate:a.animation,targets:l,translateX:t,form:a.form}),n&&(n.style.width="".concat(null!=s?s:0,"%"))};try{r?r.addEventListener("click",(function(e){e.preventDefault(),f()})):this.isLazyRun&&f()}catch(e){console.error(e)}}},{key:"PROGRESS",get:function(){return 100/this.fieldsetLength}},{key:"PROGRESSING_DATA",get:function(){return this.progressingData}},{key:"RENDERED_STYLE",get:function(){return this.renderedStyle}},{key:"formatProgressingData",value:function(e){this.progressingData&&Object.entries(this.progressingData).length>0&&(0===e&&delete this.progressingData["fieldset".concat(e)].prev,e===this.lastIndex-1&&delete this.progressingData["fieldset".concat(e)].next)}},{key:"compartmentalizeFocusInFieldset",value:function(e){window.addEventListener("keydown",(function(t){"Tab"===t.key&&null!==e&&function(e,t){e.preventDefault();var r=o(t),n=r.findIndex((function(e){return e===t.querySelector(":focus")}));!0===e.shiftKey?n--:n++,n>=r.length&&(n=0),n<0&&(n=r.length-1),r[n].focus()}(t,e)}))}},{key:"isValidFieldset",value:function(e){if(e){var t=Array.from(e.querySelectorAll("input, select, textarea"));if(t)for(var r=0,n=t;r<n.length;r++){var i=n[r];if(!i.checkValidity())return i.reportValidity(),!1}}return!0}},{key:"fieldsetTargetArray",get:function(){var e=[],t=this.lazyFieldsetLength?this.lazyFieldsetLength:this.fieldsetLength;if(t>0)for(var r=0;r<t;r++)e.push(".fieldset".concat(r));return e}},{key:"hasValidHTMLStructure",value:function(e){try{if(!e)throw new Error("The form could not be retrieved");var t=e.querySelector("[fieldset__parent]");if(!t)throw new Error("The element with the attribute [fieldset__parent] not found in your form");var r=t.querySelector("[fieldset__container]");if(!r)throw new Error("The element with the attribute [fieldset__container] not found in your fieldset__parent");if(!r.querySelectorAll("fieldset"))throw new Error("Aucune section de formulaire trouvÃ©e.");var n=e.querySelectorAll("[__next__]"),i=e.querySelectorAll("[__prev__]");if(!n)throw new Error('No "next" button found!');if(!i)throw new Error("No 'previous' button found!")}catch(e){throw e}}},{key:"setTranslateX",value:function(e,t){e&&(this.translateX=t&&t.translateX?t.translateX:-e.offsetWidth)}}],t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();return t})()));
//# sourceMappingURL=progress-form.min.js.map