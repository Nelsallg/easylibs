/*! For license information please see file-uploader.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("file-uploader",[],t):"object"==typeof exports?exports["file-uploader"]=t():e["file-uploader"]=t()}(self,(()=>{return e={951:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=o(r(792)),i=r(582);t.default=class{constructor(e,t,r=!0,n){this.autoEvent=!0,this.input=s.default.$$(e),this.fileElement=t?s.default.$$(t):null,this.autoEvent=r,this.progressContainer=n instanceof HTMLElement?n:document.querySelector(`${n}`)}load(e=(e=>{})){const t=t=>{if(t.files){let{files:r}=t;1===r.length&&this.singleUploading(r[0],(t=>e(t))),r.length>1&&this.multipleUploading(r,(t=>e(t)))}};if(this.input&&this.input instanceof HTMLInputElement&&(!0===this.autoEvent&&this.input.addEventListener("change",(()=>{const e=this.input;return t(e)})),!1===this.autoEvent))try{const{input:e}=this;if(!e)throw new Error("No Input Target");return t(e)}catch(e){console.log(`Error ${e}`)}}singleUploading(e,t){let r=null;const o=new FileReader;this.progress(e),o.onload=()=>n(this,void 0,void 0,(function*(){const n=o.result;return r={name:e.name,base64String:n?n.toString():"",contentType:e.type,size:e.size,arrayBuffer:yield e.arrayBuffer()},s.default.processNodes(this.fileElement,(e=>{e.src=`${n}`})),t(r)})),o.readAsDataURL(e)}multipleUploading(e,t){let r=[];for(let o=0;o<e.length;o++){let s=e[o];if(this.progress(s),s instanceof Blob){let o=new FileReader;o.onload=()=>n(this,void 0,void 0,(function*(){const n=o.result;r.push({name:s.name,base64String:n?n.toString():"",contentType:s.type,size:s.size,arrayBuffer:yield s.arrayBuffer()}),r.length===e.length&&t(r)})),o.readAsDataURL(s)}}}autoUploadFile(){const e=new i.Transformer.FileTransformer,t=document.querySelectorAll("input[type='file']");s.default.processNodes(t,(t=>{const r=t.dataset.value;if(r&&""!==r){const n=e.fromBase64String(r,null,null,!1);if(n){const e=new DataTransfer;e.items.add(n),Object.defineProperty(t,"files",{value:e.files,writable:!1}),t.removeAttribute("data-value");const r=new Event("change");t.dispatchEvent(r)}}}))}progress(e){try{if(!e)return;if(!this.progressContainer)return;let t=this.progressHTML();this.progressContainer.appendChild(t),(new XMLHttpRequest).upload.addEventListener("progress",(function(e){if(console.log(e.lengthComputable),e.lengthComputable){let r=e.loaded/e.total*100;t.style.width=r+"%",t.innerHTML=r.toFixed(0)+"%",console.log(r.toFixed(0)+"%")}}))}catch(e){console.error(e)}}progressHTML(){const e=s.default.textToHTMLElement('<div id="progress-container">\n        <div id="progress-bar"></div>\n    </div>');return e.style.position="absolute",e}createInput(){const e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("multiple","true"),e.style.display="none"}}},582:e=>{var t;self,t=()=>(()=>{"use strict";var e={};return{"./src/transformer.ts":function(e,t){var r,n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}l((n=n.apply(e,t||[])).next())}))};function o(e,t="both"){const r=e.split(",")[0].split(":")[1].split(";")[0].split("/")[1],n=e.split(",")[0].split(":")[1].split(";")[0].split("/")[0];return"type"===t?n:"extension"===t?r:n+"/"+r}Object.defineProperty(t,"__esModule",{value:!0}),t.Transformer=void 0,function(e){e.Base64Transformer=class{constructor(){this.base64String=""}toFile(e,t){this.base64String=e;const r=window.atob(e.split(",")[1]),n=[];let s="";for(let e=0;e<r.length;e+=512){const t=r.slice(e,e+512),o=new Array(t.length);for(let e=0;e<t.length;e++)o[e]=t.charCodeAt(e);const s=new Uint8Array(o);n.push(s)}const i=o(e,"extension"),a=o(e,"type");return s=t||`tranformed_file.${i}`,new File(n,s,{type:`${a}/${i}`})}fromFile(e){return new Promise(((t,r)=>{const n=new FileReader;n.onloadend=()=>{t(n.result)},n.onerror=e=>{r(e)},n.readAsDataURL(e)}))}toUint8Array(e){const t=window.atob(e.split(",")[1]),{length:r}=t,n=new Uint8Array(r);for(let e=0;e<r;e++)n[e]=t.charCodeAt(e);return n}fromUint8Array(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return window.btoa(t)}fromBlob(e){return n(this,void 0,void 0,(function*(){return new Promise((t=>{const r=new FileReader;r.onloadend=function(){const{result:e}=r;t(e||"")},r.readAsDataURL(e)}))}))}},e.BlobTransformer=class{fromUint8Array(e,t){return t=null!=t?t:"",new Blob([e],{type:t})}fromFile(e){return e.slice(0,e.size,e.type)}fromBase64String(e,t){t=t||"";const r=window.atob(e.split(",")[1]),n=new Array(r.length);for(let e=0;e<r.length;e++)n[e]=r.charCodeAt(e);const o=new Uint8Array(n);return new Blob([o],{type:t})}},e.FileTransformer=class{toBase64(e){return new Promise(((t,r)=>{const n=new FileReader;n.onloadend=()=>{t(n.result)},n.onerror=e=>{r(e)},n.readAsDataURL(e)}))}fromBase64String(e,t,r,n=!0){t=t||"";const o=n?e.split(",")[1]:e,s=window.atob(o),i=new Array(s.length);for(let e=0;e<s.length;e++)i[e]=s.charCodeAt(e);const a=new Uint8Array(i),l=new Blob([a],{type:t});return r=r||"image",new File([l],r,{type:t})}fromUint8Array(e,t,r){return new File(e,r,{type:t})}},e.FormDataTransformer=class{constructor(e){this._data=e}transform(){const e=new FormData;if("object"==typeof this._data){let t=this._data;try{for(const r in this._data)this._data.hasOwnProperty(r)&&e.append(r,t[r])}catch(e){console.error("Erreur détectée: "+e)}}return e}reverse(){let e={};if(this._data instanceof FormData)try{const t={};this._data.forEach(((e,r)=>{t[r]=e})),e=Object.assign({},t)}catch(e){console.error("Erreur détectée: "+e)}return e}option(e){return"onlyobject"===e?this._data instanceof FormData?this.reverse():this._data:"onlyformdata"===e?this._data instanceof FormData?this._data:this.transform():"auto"===e?this.auto():void 0}auto(){return this._data instanceof FormData?this.reverse():this.transform()}}}(r||(t.Transformer=r={}))}}["./src/transformer.ts"](0,e),e})(),e.exports=t()},792:e=>{var t;self,t=()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{static setAudio(e,t=null){const r=document.createElement("audio");null!=t&&r.classList.add(t);const n=document.createElement("source");return n.src=this.resolvePath(e),n.type="audio/mpeg",r.appendChild(n),r}static textToHTMLElement(e,t="div",r=!1){const n=document.createElement(`${t}`);return n.innerHTML=e,!0===r?n.children:n.firstElementChild}static $$(e){if(e instanceof HTMLElement||e instanceof HTMLCollection)return e;if("string"!=typeof e)throw new Error("Type of element is not supported");{const t=document.querySelectorAll(`${e}`),r=document.querySelector(`${e}`);if(null!==t&&t.length>1)return t;if(null!==r)return r}}static processNodes(e,t=((e,t)=>{})){return e instanceof NodeList||Array.isArray(e)?Array.from(e).forEach(((e,r)=>{t(e,r)})):null!=e?t(e):void 0}static getRegexp(e){switch(e){case"email":return new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/i);case"phone-number":return new RegExp(/^(0|\\+[1-9]{1,3})[0-9 ]+$/);case"number":return new RegExp(/^[0-9]+$/);case"strong-password":return new RegExp(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/);case"url":return new RegExp(/^(ht|f)tp(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%\$#_]*)?$/);case"default-text":return new RegExp(/^[a-zA-Z -'áàâäãåçéèêëğíìîïıñóòôöõúùûüşýÿæœÁÀÂÄÃÅÇÉÈÊËĞÍÌÎÏIÑÓÒÔÖÕÚÙÛÜŞÝŸÆŒ]+$/);case"fr-text":return new RegExp(/^[A-Za-z' - àâçéèêëûæœÀÂÉÈÊËÆŒ]+$/);case"en-text":return new RegExp(/^[a-zA-Z '-]{1,40}$/);case"tr-text":return new RegExp(/^[A-Za-z çğıöüşæœÇĞIÖÜŞ]+$/);default:throw new Error("Type d'expression régulière non pris en charge.")}}static resolvePath(e){const t=window.location.pathname.split("/")[1],r=window.location.origin,n=(window.location.port,window.location.host);return"localhost"==n?r+`/${t}/${e}`:r+`/${e}`}static forbiddener(e="td",t){let r=document.createElement(e);r.setAttribute("class","forbidden");const n={position:"absolute",width:"100%",height:"100%",opacity:".7",zIndex:"10",backgroundColor:t||"#FFFFFF"};return Object.assign(r.style,n),r}static reduceText(e,t=14){return(e="string"==typeof e?e.trim():"").length>t?`${e.substring(0,t)}...`:e}static changeInputTextTypeToNumberType(e,t,r=!1,n){this.processNodes(this.$$(e),(function(e){let o=e;o&&o.addEventListener("input",(function(){const e=r?/^[0-9]+([.,][0-9]+)?$/:/[^\d]/g;if(n){const t=o.value.replace(e,"");o.value=`${parseFloat(t).toFixed(n)}`}else o.value=o.value.replace(e,"");t&&parseInt(o.value)>t&&(o.value=`${t}`)}))}))}static disablor(e="td",t,r,n){const o=document.querySelectorAll("[disablor],[self-disablor]");try{if(!r&&!o)throw new Error("Aucun bouton avec l'attribut <disablor> n'est détecté, vous pouvez le passer manuellement");this.processNodes(o,(r=>{r.addEventListener("click",(()=>{let o=r.hasAttribute("self-disablor")?r:r.closest("[disablor]");if(!t&&!o)throw new Error("Aucun élément à désactiver contenant l'attribut <disablor> n'est détecté, vous pouvez le passer manuellement");o&&(o.style.position="relative",o.insertBefore(this.forbiddener(e,n),o.firstChild),o instanceof HTMLButtonElement&&o.setAttribute("disabled","true"))}))}))}catch(e){console.error("Une erreur s'est produit: ",e)}}static setAsteriskToRequiredField(){const e=document.querySelectorAll("label[required-field]");e&&this.processNodes(e,(e=>{const t=document.createRange().createContextualFragment('<svg class="required-svg">\n        <use xlink:href="../asset/icon.svg#asterisk"></use>\n        </svg>');e.appendChild(t)}))}static hasKeyWithNameSubstring(e,t,r){for(let n in e)if(n.includes(t)){if(void 0===r||!1===r)return e[n];if(!0===r)return n}return!1}static findObjectDataByKeyName(e,t,r){return Object.keys(e).forEach((r=>{if(r.includes(t))return e[r]})),!1}static findChar(e,t,r=!1){for(let n=0;n<=t;n++)if(-1!==e.indexOf(n.toString()))return!!r||n.toString();return!r&&null}static findComputedStyle(e,t){const r=window.getComputedStyle(e),n={};try{if(!e)throw new Error("Element not found");if(!t)throw new Error("Property is required");if(Array.isArray(t)&&t.length>0)return t.forEach((e=>{n[`${e}`]=r.getPropertyValue(`${e}`)})),n;if("string"==typeof t)return r.getPropertyValue(`${t}`)}catch(e){console.error(e)}}static escape(e){if(!e)return"";const t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML}static findHTMLElementBy(e,t){let r=e;if(r)for(;r=r.previousElementSibling;){const e=r.querySelector(t);if(e)return e}return null}static formatHTMLAttributes(e){let t="";if(e)for(const[r,n]of Object.entries(e))r&&(t+=`${r}='${n}'`);return t.trim()}}})(),e})(),e.exports=t()}},t={},function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}(951);var e,t}));
//# sourceMappingURL=file-uploader.min.js.map