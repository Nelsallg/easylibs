!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("flash",[],t):"object"==typeof exports?exports.flash=t():e.flash=t()}(self,(()=>(()=>{"use strict";var e={948:(e,t,n)=>{n.r(t)},537:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(816));n(948);const i=r(n(347));class a{constructor(e){this.properties={},this.properties={},a.ACCEPTED_PARAMS.length>0&&a.ACCEPTED_PARAMS.forEach((t=>{e&&e.hasOwnProperty(t)&&Object.assign(this.properties,{[t]:e[t]})}))}getProperties(){return this.properties}}a.ACCEPTED_PARAMS=[],a.ACCEPTED_PARAMS=["message","type","duration","title","closeButton","container","icon","tone"];class s{static add(e,t){let n;switch(e){case null:case void 0:const t=document.querySelector("flash");try{if(!t)throw new Error("No <flash></flash> element found in your template");const e=i.default.escape(t.getAttribute("message")),r=Boolean(t.getAttribute("icon")),o=parseInt(t.getAttribute("duration")),a=t.getAttribute("type"),l=t.getAttribute("title"),u=Boolean(t.getAttribute("closeButton")),c=Boolean(t.getAttribute("tone")),d=t.getAttribute("template");s.TEMPLATE=isNaN(parseInt(String(d)))?void 0:parseInt(d),n={message:e,icon:r,duration:o,type:a,title:l,closeButton:u,tone:c}}catch(e){console.error(e)}break;default:n=e}let r=new a(n).getProperties(),o=s.create(r.duration,r.type);return s.OPTIONS=n,s.OPTIONS.flashBox=o,s.OPTIONS.container=t,s.run(),new this}static async run(){if(s.OPTIONS){const{container:e,flashBox:t,tone:n}=s.OPTIONS,r=await s.template();t.append(...Array.from(r)),new o.default({modal:t,container:e,tone:n}).open()}return new this}static async template(){const e=s.TEMPLATE,t=s.OPTIONS;let n;t.icon&&t.type&&(n=await s.svg(t.type));const r=n?`<h6 class="flash-icon">${n.replace('"',"")}</h6>`:"",o=t.title&&""!==t.title?`<p class="flash-title">${t.title}</p>`:"",a=!0===Boolean(t.closeButton)?'<div aria-label="Close message" _close_></div>':"",l=""!==o||""!==a?`<span class="flash-header">${o}${a}</span>`:"";let u;if(!e||Number.isInteger(e))if(2===e)u=`${a}<span class="flash-content">\n                ${r}\n                <p class="flash-message">${t.message}</p>\n            </span>`;else u=`${l}\n                      <span class="flash-content">\n                          ${r}\n                          <p class="text">${t.message}</p>\n                      </span>`;else if("string"==typeof e)return s.parseTemplate(e,t);return i.default.textToHTMLElement(u,"div",!0)}static async parseTemplate(e,t){const n=/{{(.*?)}}/g;let r=e.matchAll(n),o=[],a=[];for(let e of r){let n=e[1];"icon"===n&&!0===t[n]&&"type"in t&&(o.push(s.svg(t.type)),a.push(e[0]))}let l=await Promise.all(o);a.forEach(((t,n)=>{e=e.replace(t,l[n])})),e=e.replace(n,((e,n)=>n in t&&void 0!==t[n]?t[n]:e));try{return i.default.textToHTMLElement(e,"div",!0)}catch(e){throw new Error("Impossible de parser le modèle de notification.")}}static create(e,t){let n=document.querySelector("flash"),r=null;n&&n.remove(),t=null!=t?"flashtype-"+t:"",r=Number.isInteger(this.TEMPLATE)?this.TEMPLATE:null,this.TEMPLATE||(r=1);let o=document.createElement("flash");return o.role="alert",o.setAttribute("class",`flash-box ${t}`),void 0!==e&&e>0&&o.setAttribute("duration",`${e}`),r&&o.setAttribute("template",`${r}`),o}static async svg(e){if(void 0===e||!["success","danger","warning","info"].includes(e))return e;try{const t=sessionStorage.getItem(e);if(t)return t;const n=`https://raw.githubusercontent.com/Nelsallg/easylibs/1.0.0/packages/flash/dist/assets/icons/${e}.svg`,r=await fetch(n),o=await r.text();return r.ok||console.error("Erreur lors du chargement du fichier SVG:",o),sessionStorage.setItem(e,o),o}catch(e){return console.warn("Erreur lors de l'importation de l'icon",e),""}}}t.default=s},498:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.animeInOut=t.animeOut=t.animeIn=void 0;const n=function(e){e.stopPropagation()};function r(e,t,n){if(n){const r=n.type??"fade",o=n.position??"top",{clearAfterApplying:i}=n;!0===t?(e.classList.remove(`${r}-out-${o}`),e.classList.add(`${r}-in-${o}`),!0===i&&setTimeout((()=>{e.classList.remove(`${r}-in-${o}`)}),1e3)):(e.classList.remove(`${r}-in-${o}`),e.classList.add(`${r}-out-${o}`),!0===i&&setTimeout((()=>{e.classList.remove(`${r}-out-${o}`)}),1e3))}}function o(e){const t=e.fromInToOut??!0,{animation:n}=e,o=e.element,i=o instanceof HTMLElement?void 0:o?.animateElement,a=o instanceof HTMLElement?o:o?.element;a&&(r(i??a,t,n),null!==e.display&&(void 0!==e.display?a.style.display=e.display:a.style.display="block"))}function i(e){const{animation:t}=e,n=e.element,o=n instanceof HTMLElement?void 0:n?.animateElement,i=n instanceof HTMLElement?n:n?.element,a=e.fromInToOut??!1,{display:s,delay:l,closeButton:u}=e;i&&void 0!==a&&(s?(u&&u.addEventListener("click",(function(){r(o??i,a,t),setTimeout((()=>{i.style.display="none"}),l||0)})),r(o??i,a,t),setTimeout((()=>{i.style.display="none"}),l||0)):(u&&u.addEventListener("click",(function(){r(o??i,a,t),setTimeout((()=>{i.remove()}),l||0)})),r(o??i,a,t),setTimeout((()=>{i.remove()}),e.delay||0)))}t.animeIn=o,t.animeOut=i,t.animeInOut=function(e){let t=!1;const{element:r,openButton:a,closeButton:s,animation:l}=e,u=e.display??"block",{dispatchCloseEvent:c}=e,d=e.delay??350;try{if(a&&a.addEventListener("click",(function(){!1===t?(t=!0,o({element:r,animation:l,display:u})):(t=!1,i({element:r,animation:l,display:u,delay:d}))})),void 0!==s&&!t){if(s.addEventListener("click",(function(){t=!1,i({element:r,animation:l,display:u,delay:d})})),c&&!0===c.value){const e=c.key;document.addEventListener("click",(function(n){const o=n.target;!a||!s||a.contains(o)||s.contains(o)||e.contains(o)||(t=!1,i({element:r,animation:l,display:u,delay:d}))})),e.addEventListener("click",n)}return}if(void 0===s&&!t&&c)if(void 0===c.key&&!0===c.value){HTMLElement;const e=r instanceof HTMLElement?r:r?.element;document.addEventListener("click",(function(n){const o=n.target;a&&e&&!a.contains(o)&&!e.contains(o)&&(t=!1,i({element:r,animation:l,display:u,delay:d}))})),e&&e.addEventListener("click",n)}else{const e=c.key;document.addEventListener("click",(function(n){const o=n.target;!a||a.contains(o)||e.contains(o)||(t=!1,i({element:r,animation:l,display:u,delay:d}))})),e.addEventListener("click",n)}}catch(e){throw new Error("HTMLElement null or undefined.")}}},816:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(n(347)),i=n(498);t.default=class{constructor(e){this.close=()=>{new Animation;const e=this.modal;e.setAttribute("aria-hidden","true"),(0,i.animeOut)({element:e,display:void 0,delay:350,closeButton:this.closeButton,animation:this.animation})},this.autoClose=()=>{this.duration>0&&setTimeout((()=>{this.close()}),this.duration)},this.modal=e.modal,this.tone=(e.tone,null),this.volume=parseInt(this.modal.getAttribute("volume")||"1",10),this.duration=parseInt(this.modal.getAttribute("duration")||"0",10),this.modal.setAttribute("aria-hidden","true"),this.container=e.container,this.animation=e.animation?e.animation:{type:"slide",position:"top"},this.closeButton,this.openButton,this.autoClose()}open(){if(this.tone){const e="https://raw.githubusercontent.com/Nelsallg/easylibs/1.0.0/packages/flash/dist/assets/tone.ogg",t=o.default.setAudio(e);t.volume=this.volume,t.play()}const e=this.modal;(0,i.animeIn)({element:e,display:"flex",animation:this.animation});const t=this.container,n=document.querySelector("flash");n&&document.body.removeChild(n),void 0!==t?(t.insertBefore(e,t.firstChild),this.clearProperties(this.modal)):(document.body.insertBefore(e,document.body.firstChild),this.clearProperties(this.modal)),e.setAttribute("aria-hidden","false"),this.closeButton=e.querySelector(".flash-close-button"),this.closeButton||(this.closeButton=e.querySelector("[_close_]")),this.closeButton?.addEventListener("click",this.close)}clearProperties(e){document.addEventListener("DOMContentLoaded",(function(){e.removeAttribute("message"),e.removeAttribute("duration"),e.removeAttribute("icon"),e.removeAttribute("tone"),e.removeAttribute("volume"),e.removeAttribute("container"),e.removeAttribute("closeButton")}))}}},347:(e,t)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"setAudio",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.createElement("audio");null!=t&&n.classList.add(t);var r=document.createElement("source");return r.src=e,r.type="audio/mpeg",n.appendChild(r),n}},{key:"textToHTMLElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=document.createElement("".concat(t));return r.innerHTML=e,!0===n?r.children:r.firstElementChild}},{key:"$$",value:function(e){if("string"!=typeof e)return e;if("string"==typeof e){var t=document.querySelectorAll("".concat(e)),n=document.querySelector("".concat(e));if(null!==t&&t.length>1)return t;if(null!==n)return n}}},{key:"processNodes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){};return e instanceof NodeList||Array.isArray(e)?Array.from(e).forEach((function(e,n){t(e,n)})):null!=e?t(e):void 0}},{key:"getRegexp",value:function(e){switch(e){case"email":return new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/i);case"phone-number":return new RegExp(/^(0|\+[1-9][0-9]{0,2}) ?[0-9]+$/);case"number":return new RegExp(/^[-+]?[0-9]*\.?[0-9]+$/);case"strong-password":return new RegExp(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/);case"url-protocol":return new RegExp(/^(https?:\/\/)$/,"i");case"url-domain":return new RegExp(/^((([a-zA-Z0-9]{1,})[.-]?)+[a-zA-Z]{2,})$/,"i");case"url-ip":return new RegExp(/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,"i");case"url-port":return new RegExp(/^:(6553[0-5]|655[0-2][0-9]|65[0-4][0-9]{2}|6[0-4][0-9]{3}|[1-5][0-9]{4}|[1-9][0-9]{0,3})$/,"i");case"url-path":return new RegExp(/^(\.\/)?[-a-zA-Z\d%_.~+\/]*$/,"i");case"url-query":return new RegExp(/^(\?[;&a-zA-Z\d%_.~+=-]*)$/,"i");case"url-fragment":return new RegExp(/^#[-a-zA-Z\d%_.~+/=?&;:!*'()]*$/,"i");case"default-text":return new RegExp(/^[a-zA-Z -'áàâäãåçéèêëğíìîïıñóòôöõúùûüşýÿæœÁÀÂÄÃÅÇÉÈÊËĞÍÌÎÏIÑÓÒÔÖÕÚÙÛÜŞÝŸÆŒ]+$/);case"fr-text":return new RegExp(/^[A-Za-z' - àâçéèêëûæœÀÂÉÈÊËÆŒ]+$/);case"en-text":return new RegExp(/^[a-zA-Z '-]{1,40}$/);case"tr-text":return new RegExp(/^[A-Za-z çğıöüşæœÇĞIÖÜŞ]+$/);default:throw new Error("Type d'expression régulière non pris en charge.")}}},{key:"forbiddener",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"td",t=arguments.length>1?arguments[1]:void 0,n=document.createElement(e);n.setAttribute("class","forbidden");var r={position:"absolute",width:"100%",height:"100%",opacity:".7",zIndex:"10",backgroundColor:t||"#FFFFFF"};return Object.assign(n.style,r),n}},{key:"truncateChars",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;return(e="string"==typeof e?e.trim():"").length>t?"".concat(e.substring(0,t),"..."):e}},{key:"changeInputTextTypeToNumberType",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;this.processNodes(this.$$(e),(function(e){var o=e;o&&o.addEventListener("input",(function(){var e=n?/^[0-9]+([.,][0-9]+)?$/:/[^\d]/g;if(r){var i=o.value.replace(e,"");o.value="".concat(parseFloat(i).toFixed(r))}else o.value=o.value.replace(e,"");t&&parseInt(o.value)>t&&(o.value="".concat(t))}))}))}},{key:"disablor",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"td",n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=document.querySelectorAll("[disablor],[self-disablor]");try{if(!r&&!i)throw new Error("Aucun bouton avec l'attribut <disablor> n'est détecté, vous pouvez le passer manuellement");this.processNodes(i,(function(r){r.addEventListener("click",(function(){var i=r.hasAttribute("self-disablor")?r:r.closest("[disablor]");if(!n&&!i)throw new Error("Aucun élément à désactiver contenant l'attribut <disablor> n'est détecté, vous pouvez le passer manuellement");i&&(i.style.position="relative",i.insertBefore(e.forbiddener(t,o),i.firstChild),i instanceof HTMLButtonElement&&i.setAttribute("disabled","true"))}))}))}catch(e){console.error("Une erreur s'est produit: ",e)}}},{key:"setAsteriskToRequiredField",value:function(){var e="custom-asterisk-style";if(!document.getElementById(e)){var t=document.createElement("style");t.id=e,document.head.appendChild(t),t.sheet.insertRule("\n          label[required-field]::after {\n            content: '*';\n            color: #f89a9b;\n            width: 10px;\n            height: 10px;\n          }\n        ",0)}document.querySelectorAll("label[required-field]").forEach((function(e){e.style.display="flex",e.style.alignItems="center"}))}},{key:"hasKeyWithNameSubstring",value:function(e,t,n){for(var r in e)if(r.includes(t)){if(void 0===n||!1===n)return e[r];if(!0===n)return r}return!1}},{key:"findObjectDataByKeyName",value:function(e,t,n){return Object.keys(e).forEach((function(n){if(n.includes(t))return e[n]})),!1}},{key:"findChar",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<=t;r++)if(-1!==e.indexOf(r.toString()))return!!n||r.toString();return!n&&null}},{key:"findComputedStyle",value:function(e,t){var n=window.getComputedStyle(e),r={};try{if(!e)throw new Error("Element not found");if(!t)throw new Error("Property is required");if(Array.isArray(t)&&t.length>0)return t.forEach((function(e){r["".concat(e)]=n.getPropertyValue("".concat(e))})),r;if("string"==typeof t)return n.getPropertyValue("".concat(t))}catch(e){console.error(e)}}},{key:"escape",value:function(e){if(!e)return"";var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML}},{key:"findHTMLElementBy",value:function(e,t){var n=e;if(n)for(;n=n.previousElementSibling;){var r=n.querySelector(t);if(r)return r}return null}},{key:"formatHTMLAttributes",value:function(e){var t="";if(e)for(var n=0,o=Object.entries(e);n<o.length;n++){var i=r(o[n],2),a=i[0],s=i[1];a&&(t+="".concat(a,"='").concat(s,"'"))}return t.trim()}},{key:"autoResizeSelect",value:function(e){var t=this.$$(e);t instanceof HTMLSelectElement?(t.addEventListener("change",(function(e){var t=document.createElement("select"),n=document.createElement("option");if(null!==e.target&&e.target instanceof HTMLSelectElement){n.textContent=e.target.options[e.target.selectedIndex].text,t.style.cssText+="\n                      visibility: hidden;\n                      position: fixed;\n                      ",t.appendChild(n),e.target.after(t);var r=t.getBoundingClientRect().width;console.log({tempSelect:t}),e.target.style.width="".concat(r,"px"),t.remove()}})),t.dispatchEvent(new Event("change"))):console.error("Le paramètre n'est pas un élément Select")}}],(t=null)&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();t.default=s}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}return n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(537)})()));
//# sourceMappingURL=flash.min.js.map